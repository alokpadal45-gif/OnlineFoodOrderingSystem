@model OnlineFoodOrderingSystem.ViewModels.DashboardViewModel

@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="row mb-4">
    <div class="col-12">
        <h2><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h2>
        <p class="text-muted">Complete system overview and statistics</p>
    </div>
</div>

<div class="row mb-4">
    <!-- Total Users Card -->
    <div class="col-md-3">
        <div class="card bg-primary text-white shadow">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title">Total Users</h6>
                        <h2 class="mb-0">@Model.TotalUsers</h2>
                    </div>
                    <div>
                        <i class="fas fa-users fa-3x opacity-50"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-primary-dark">
                <!-- FIXED: Customer instead of User -->
                <a asp-controller="Customer" asp-action="Index" class="text-white text-decoration-none">
                    View Details <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Total Food Items Card -->
    <div class="col-md-3">
        <div class="card bg-success text-white shadow">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title">Food Items</h6>
                        <h2 class="mb-0">@Model.TotalFoodItems</h2>
                    </div>
                    <div>
                        <i class="fas fa-utensils fa-3x opacity-50"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-success-dark">
                <a asp-controller="Food" asp-action="Index" class="text-white text-decoration-none">
                    Manage Food <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Total Orders Card -->
    <div class="col-md-3">
        <div class="card bg-info text-white shadow">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title">Total Orders</h6>
                        <h2 class="mb-0">@Model.TotalOrders</h2>
                    </div>
                    <div>
                        <i class="fas fa-shopping-cart fa-3x opacity-50"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-info-dark">
                <a asp-controller="Order" asp-action="Index" class="text-white text-decoration-none">
                    View Orders <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Total Revenue Card -->
    <div class="col-md-3">
        <div class="card bg-warning text-white shadow">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="card-title">Total Revenue</h6>
                        <h2 class="mb-0">NPR @Model.TotalRevenue.ToString("N2")</h2>
                    </div>
                    <div>
                        <i class="fas fa-dollar-sign fa-3x opacity-50"></i>
                    </div>
                </div>
            </div>
            <div class="card-footer bg-warning-dark">
                <!-- FIXED: Order instead of Report -->
                <a asp-controller="Order" asp-action="Index" class="text-white text-decoration-none">
                    View Reports <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Order Status Row -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-warning text-white">
                <h5 class="mb-0"><i class="fas fa-clock"></i> Pending Orders</h5>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <h1 class="display-4">@Model.PendingOrders</h1>
                    <p class="text-muted">Orders awaiting processing</p>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-check-circle"></i> Completed Orders</h5>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <h1 class="display-4">@Model.CompletedOrders</h1>
                    <p class="text-muted">Successfully delivered orders</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Orders Table -->
<div class="row">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-dark text-white">
                <h5 class="mb-0"><i class="fas fa-list"></i> Recent Orders</h5>
            </div>
            <div class="card-body">
                @if (Model.RecentOrders.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Order Date</th>
                                    <th>Total Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var order in Model.RecentOrders)
                                {
                                    <tr>
                                        <td>#@order.OrderId</td>
                                        <td>@order.User.FirstName @order.User.LastName</td>
                                        <td>@order.OrderDate.ToString("MMM dd, yyyy hh:mm tt")</td>
                                        <td>NPR @order.TotalAmount.ToString("N2")</td>
                                        <td>
                                            <span class="badge 
                                                @(order.Status == "Delivered" ? "bg-success" : 
                                                  order.Status == "Processing" ? "bg-warning" : 
                                                  order.Status == "Cancelled" ? "bg-danger" : "bg-info")">
                                                @order.Status
                                            </span>
                                        </td>
                                        <td>
                                            <a asp-controller="Order" asp-action="Details" 
                                               asp-route-id="@order.OrderId" 
                                               class="btn btn-sm btn-primary">
                                                <i class="fas fa-eye"></i> View
                                            </a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <p class="text-center text-muted">No recent orders found.</p>
                }
            </div>
        </div>
    </div>
</div>